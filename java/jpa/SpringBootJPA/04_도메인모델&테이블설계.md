FK를 업데이트 하는 곳을 주의깊게.

- 연관관계의 주인 (FK를 어디에 업데이트 할 것인가?)
- 연관관계의 주인은 FK를 갖고 있는 곳으로 하면 됨.



엔티티 설계 시 주의점

- 엔티티에 가급적 setter를 사용하지 말자.
- 모든 연관관계는 **지연로딩으로 설정**
  - @XToOne은 default로 eager 로딩이므로, lazy로 변경한다.
  - Eager를 사용하면 예측이 어려움. N+1 문제 발생하기 쉬움.
  - 연관된 엔티티를 함께 조회하려면, join fetch를 사용하도록 (1개의 컬렉션은 안정적으로 가져옴)
- 컬렉션은 필드에서 초기화하자.
  - null문제에서 안전.
  - 하이버네이트에서 엔티티 퍼시스턴트할 때, 컬렉션을 내장 컬렉션으로 변경함



테이블, 컬럼명 생성 전략

스프링부트에서 하이버네이트 기본 매핑전략을 변경해줌



케스케이드 전략.



연관관계 편의 메서드

- 양방향 연관관계에 편의 메서드 작성해서 사용하자.
- 조회를 많이 하는 부분에서 사용하는 것이 좋음.

